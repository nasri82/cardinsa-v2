Step 2C: Plans & Coverage Structure - Complete Table List
Core Plan Tables:

plans âœ… (Already exists)

Master plan definitions with company associations
Plan types, premium amounts, coverage periods
Versioning and lifecycle management


plan_types âœ… (Already exists)

Categorization of plan types (Medical, Motor, Life, etc.)
Multi-language labels and icons
Display ordering


plan_coverage_links âœ… (Already exists)

Links plans to specific coverages
Coverage amounts, deductibles, copay percentages
Mandatory vs optional coverage flags



Exclusion Management Tables:

plan_exclusions âœ… (Already exists)

General exclusions with multi-language text
Links to medical and motor exclusion codes
Plan-specific exclusion definitions


plan_exclusion_links âœ… (Already exists)

Many-to-many relationship between plans and exclusions
Simple linking table


plan_medical_exclusions âœ… (From your recent addition)

Links plans to specific medical exclusion codes
Notes and effective dates for exclusions



Enhanced Plan Tables (Need to be created/enhanced):

plan_versions ðŸ†• (Recommended addition)

sql   CREATE TABLE plan_versions (
       id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
       plan_id UUID REFERENCES plans(id) ON DELETE CASCADE,
       version_number VARCHAR(20) NOT NULL,
       version_description TEXT,
       changes_from_previous JSONB,
       effective_date DATE NOT NULL,
       expiry_date DATE,
       created_by_reason VARCHAR(200),
       regulatory_approval_required BOOLEAN DEFAULT FALSE,
       approval_status VARCHAR(50),
       approved_by UUID,
       approved_at TIMESTAMP,
       is_current_version BOOLEAN DEFAULT FALSE,
       created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
       UNIQUE(plan_id, version_number)
   );

plan_territories ðŸ†• (Recommended addition)

sql   CREATE TABLE plan_territories (
       id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
       plan_id UUID REFERENCES plans(id) ON DELETE CASCADE,
       territory_type VARCHAR(50), -- country, state, region, city
       territory_code VARCHAR(50),
       territory_name VARCHAR(200),
       is_active BOOLEAN DEFAULT TRUE,
       effective_date DATE,
       expiry_date DATE,
       rate_adjustments JSONB,
       regulatory_requirements JSONB,
       created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
   );

plan_eligibility_rules ðŸ†• (Recommended addition)

sql   CREATE TABLE plan_eligibility_rules (
       id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
       plan_id UUID REFERENCES plans(id) ON DELETE CASCADE,
       rule_name VARCHAR(200),
       rule_category VARCHAR(50), -- age, occupation, medical, financial
       eligibility_criteria JSONB NOT NULL,
       is_mandatory BOOLEAN DEFAULT TRUE,
       effective_date DATE,
       expiry_date DATE,
       created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
   );
Existing Tables to Enhance:

plans (Enhancement needed)

sql    -- Add missing columns for enterprise features
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS regulatory_approval_status VARCHAR(50);
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS regulatory_filing_reference VARCHAR(100);
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS target_market_segment VARCHAR(50);
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS distribution_channels TEXT[];
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS commission_structure JSONB;
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS underwriting_guidelines TEXT;
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS policy_terms_url TEXT;
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS marketing_materials_url TEXT;
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS competitive_positioning VARCHAR(50);
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS profit_target NUMERIC(5,2);
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS minimum_group_size INTEGER;
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS maximum_issue_age INTEGER;
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS waiting_periods JSONB;
    ALTER TABLE plans ADD COLUMN IF NOT EXISTS renewal_terms JSONB;

plan_coverage_links (Enhancement needed)

sql    -- Add more sophisticated coverage linking
    ALTER TABLE plan_coverage_links ADD COLUMN IF NOT EXISTS coverage_tier VARCHAR(50);
    ALTER TABLE plan_coverage_links ADD COLUMN IF NOT EXISTS network_restrictions JSONB;
    ALTER TABLE plan_coverage_links ADD COLUMN IF NOT EXISTS prior_authorization_required BOOLEAN DEFAULT FALSE;
    ALTER TABLE plan_coverage_links ADD COLUMN IF NOT EXISTS annual_maximum NUMERIC(15,2);
    ALTER TABLE plan_coverage_links ADD COLUMN IF NOT EXISTS lifetime_maximum NUMERIC(15,2);
    ALTER TABLE plan_coverage_links ADD COLUMN IF NOT EXISTS waiting_period_days INTEGER;
    ALTER TABLE plan_coverage_links ADD COLUMN IF NOT EXISTS effective_date DATE;
    ALTER TABLE plan_coverage_links ADD COLUMN IF NOT EXISTS expiry_date DATE;
    ALTER TABLE plan_coverage_links ADD COLUMN IF NOT EXISTS geographic_restrictions JSONB;

plan_exclusions (Enhancement needed)

sql    -- Add more detailed exclusion management
    ALTER TABLE plan_exclusions ADD COLUMN IF NOT EXISTS exclusion_category VARCHAR(50);
    ALTER TABLE plan_exclusions ADD COLUMN IF NOT EXISTS exclusion_severity VARCHAR(50);
    ALTER TABLE plan_exclusions ADD COLUMN IF NOT EXISTS effective_date DATE;
    ALTER TABLE plan_exclusions ADD COLUMN IF NOT EXISTS expiry_date DATE;
    ALTER TABLE plan_exclusions ADD COLUMN IF NOT EXISTS geographic_scope TEXT[];
    ALTER TABLE plan_exclusions ADD COLUMN IF NOT EXISTS regulatory_basis VARCHAR(200);
    ALTER TABLE plan_exclusions ADD COLUMN IF NOT EXISTS exception_conditions JSONB;
Implementation Order for Step 2C:
Phase 1: Core Plan Structure

Enhance plans - Add regulatory, marketing, and business fields
Enhance plan_types - Ensure proper categorization
Create plan_versions - Version control for plan changes

Phase 2: Coverage Integration

Enhance plan_coverage_links - Add network tiers, maximums, waiting periods
Link to Step 2B benefits - Connect plans to benefit categories and coverages
Create plan_territories - Geographic plan availability

Phase 3: Exclusions & Eligibility

Enhance plan_exclusions - Add categorization and regulatory basis
Link plan_medical_exclusions - Connect to medical exclusion codes
Create plan_eligibility_rules - Who can purchase each plan

Phase 4: Business Rules

Add validation rules and constraints
Create business logic functions
Performance indexes and optimization

Key Features Each Table Will Provide:
Enhanced plans

âœ… Basic plan information (name, description, type)
âœ… Company and product associations
âœ… Pricing and coverage periods
ðŸ†• Regulatory approval tracking
ðŸ†• Target market segmentation
ðŸ†• Distribution channel management
ðŸ†• Commission structures
ðŸ†• Competitive positioning
ðŸ†• Business rules (min group size, max age, etc.)

Enhanced plan_coverage_links

âœ… Plan-to-coverage relationships
âœ… Coverage amounts and cost-sharing
ðŸ†• Network tier restrictions
ðŸ†• Annual/lifetime maximums
ðŸ†• Prior authorization requirements
ðŸ†• Waiting periods
ðŸ†• Geographic restrictions

Enhanced plan_exclusions

âœ… General exclusion text (English/Arabic)
âœ… Links to CPT/ICD/Motor codes
ðŸ†• Exclusion categorization
ðŸ†• Severity levels
ðŸ†• Regulatory justification
ðŸ†• Exception conditions

New plan_versions

ðŸ†• Complete version control
ðŸ†• Change tracking and audit
ðŸ†• Regulatory approval workflow
ðŸ†• Effective date management

New plan_territories

ðŸ†• Geographic availability control
ðŸ†• Territory-specific rate adjustments
ðŸ†• Regional regulatory compliance

New plan_eligibility_rules

ðŸ†• Age-based eligibility
ðŸ†• Occupation restrictions
ðŸ†• Medical underwriting requirements
ðŸ†• Financial qualifications

Business Value Delivered:

Complete Plan Definition - Comprehensive plan structure with all business rules
Regulatory Compliance - Proper approval tracking and filing references
Geographic Control - Territory-specific plan availability and pricing
Version Management - Full audit trail of plan changes
Flexible Exclusions - Sophisticated exclusion management with medical code integration
Eligibility Control - Detailed rules for who can purchase each plan
Network Integration - Proper network tier and restriction management
Business Intelligence - Target market, competitive positioning, and profit tracking

Dependencies Satisfied:

âœ… Step 1 (Product Catalog) - Plans link to products
âœ… Step 2A (Medical Codes) - Exclusions link to CPT/ICD/Motor codes
âœ… Step 2B (Benefits Foundation) - Coverage links connect to benefit structure
ðŸ”„ Prepares for Step 2D - Plan structure ready for detailed benefit schedules